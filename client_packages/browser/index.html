<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="theme-color" content="#000000" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <link rel="stylesheet" type="text/css" href="build/css/styles.css">
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="css/hud.css" />
    <link rel="stylesheet" type="text/css" href="css/prompt.css" />
    <link rel="stylesheet" type="text/css" href="css/notifications.css" />
    <link rel="stylesheet" type="text/css" href="css/offerDialog.css" />
    <link rel="stylesheet" type="text/css" href="css/infoTable.css" />
    <link rel="stylesheet" type="text/css" href="css/characterInfo.css" />
    <link rel="stylesheet" type="text/css" href="css/selectMenu.css" />
    <link rel="stylesheet" type="text/css" href="css/auth.css" />
    <link rel="stylesheet" type="text/css" href="css/loader.css" />
    <link rel="stylesheet" type="text/css" href="css/characterPass.css" />
    <link rel="stylesheet" type="text/css" href="css/carPass.css" />
    <link rel="stylesheet" type="text/css" href="css/driverLicense.css" />
    <link rel="stylesheet" type="text/css" href="css/speedometer.css" />
    <link rel="stylesheet" type="text/css" href="css/interactionMenu.css" />
    <link rel="stylesheet" type="text/css" href="css/inventory.css" />
    <link rel="stylesheet" type="text/css" href="css/carSpecifications.css" />
    <link rel="stylesheet" type="text/css" href="css/check.css" />
    <link rel="stylesheet" type="text/css" href="css/inputWindow.css" />
    <link rel="stylesheet" type="text/css" href="css/acceptWindow.css" />
    <link rel="stylesheet" type="text/css" href="css/terminal.css" />
    <link rel="stylesheet" type="text/css" href="css/playersList.css" />
    <link rel="stylesheet" type="text/css" href="css/gunLicense.css" />
    <link rel="stylesheet" type="text/css" href="css/fishing.css" />
    <link rel="stylesheet" type="text/css" href="css/captureScore.css" />
    <link rel="stylesheet" type="text/css" href="css/killList.css" />
    <script src="js/main.js"></script>

    <!-- development version, includes helpful console warnings -->
    <script src="js/vue-development.js"></script>
    <!-- production version, optimized for size and speed -->
    <!-- <script src="js/vue-production.js"></script> -->

    <title>[GUI] Classic Roleplay</title>
</head>

<body>
    <!-- ************************** VUE JS ************************** -->
    <!-- v-cloak в контейнерах VUE используется для того, что бы решить проблему мерцания UI при запуске -->
    <div v-cloak="v-cloak" id="hud" v-show="show">
        <div class="server-online" v-show="showOnline">
            <img class="logo" src="img/logo.png" />
            <p>Онлайн:
                {{ players }}
                /
                {{ maxPlayers }}</p>
            <p v-if="build">Сборка: #{{ build }}</p>
        </div>
        <div class="money">
            <div class="cash">
                <img src="img/hud/cash.svg" />
                $
                {{ pretty(cash) }}
            </div>
            <div class="bank">
                <img src="img/hud/credit-card.svg" />
                $
                {{ pretty(bank) }}
            </div>
            <div class="time">{{ time }}</div>
        </div>
        <div class="voice">
            <img :src="(voice)? 'img/hud/voice-on.png' : 'img/hud/voice-off.png'" />
        </div>
        <div class="weather" v-bind:style="{left: leftWeather + 'px'}">
            <div class="region">{{ region }}</div>
            <div class="street">{{ street }}</div>
            <div class="temperature">{{ temperature }}
                C°</div>
            <div class="city">{{ city }}</div>
            <img :src="'img/weather/' + weather + '.svg'" />
        </div>
    </div>

    <div v-cloak="v-cloak" id="prompt" v-if="text">
        <div class="text" v-html="text"></div>
    </div>

    <div id="notifications" v-if="messages.length">
        <div :class="notif.type" v-for="notif in messages">
            <img :src="'img/notifs/' + notif.type + '.svg'" />
            <div v-cloak="v-cloak" class="message">
                <div class="header" v-if="notif.header">{{ notif.header }}</div>
                {{ notif.text }}
            </div>
        </div>
    </div>

    <div v-cloak id="offerDialog" v-if="dialog">
        <div>
            <div class="agree" @click="dialog.yes(); hide()">Y</div>
            <div class="content">
                <div class="header">Предложение</div>
                <div class="message">
                    {{ dialog.text }}
                </div>
                <div class="price" v-if="dialog.price">
                    ${{ pretty(dialog.price) }}</div>
            </div>
            <div class="cancel" @click="dialog.no(); hide()">N</div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="infoTable" v-if="show && name">
        <div class="header">{{ tables[name].header }}</div>
        <div class="content">
            <div class="row" v-for="param in tables[name].params">
                <div class="param">
                    <div class="key">{{ param.key }}</div>
                    <div class="value" :class="{empty: param.value == 0, full: param.value == 100}">{{ prettyValue(param) }}</div>
                </div>
                <div class="progress" v-if="param.isProgress">
                    <div class="fill" :class="{full: param.value == 100}" :style="{width: param.value + '%'}"></div>
                </div>
            </div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="characterInfo" v-if="show && i < characters.length">
        <div class="header">Статистика персонажа</div>
        <div class="content">
            <div class="name">{{ characters[i].name.split(' ')[0] }}<br />{{ characters[i].name.split(' ')[1] }}</div>
            <div class="money">
                <div class="cash">
                    <img src="img/hud/cash.svg" />
                    $
                    {{ pretty(characters[i].cash) }}
                </div>
                <div class="bank">
                    <img src="img/hud/credit-card.svg" />
                    $
                    {{ pretty(characters[i].bank) }}
                </div>
            </div>
            <table class="info">
                <tr>
                    <td>Игровой статус:
                        <div>{{ characters[i].status }}</div>
                    </td>
                    <td>Отыграно:
                        <div>{{ characters[i].hours }}
                            часов</div>
                    </td>
                </tr>
                <tr>
                    <td>Организация:
                        <div>{{ characters[i].faction }}</div>
                    </td>
                    <td>Профессия:
                        <div>{{ characters[i].job }}</div>
                    </td>
                </tr>
                <tr>
                    <td>Проживание:
                        <div>{{ characters[i].house }}</div>
                    </td>
                    <td>Бизнес:
                        <div>{{ characters[i].biz }}</div>
                    </td>
                </tr>
            </table>
            <div class="warns" v-show="characters[i].warns">
                <img src="img/characterInfo/warn.svg" />
                Предупреждений:
                {{ characters[i].warns }}
            </div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="characterSelector" v-if="show">
        <div>
            <div class="arrow" @click="left" :class="{disabled: leftArrowDisabled}">&lt;</div>
            <button @click="enter" :class="{disabled: enterDisabled}">Выбрать</button>
            <div class="arrow" @click="right" :class="{disabled: rightArrowDisabled}">&gt;</div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="createCharacter" @click="onClickCreateCharacter" v-if="show">
        <div>
            <div class="plus">+</div>
            <div class="text">Создать<br />персонажа</div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="selectMenu" :class="{inactive: loader}" v-if="show && menu">
        <div class="header">{{ menu.header }}</div>
        <div class="content">
            <div class="arrow arr-up" :class="{active: menu.j > 0}"></div>
            <div class="items">
                <div class="item" v-for="(item, index) in items" v-show="isItemShow(index)" :class="{selected: index == menu.i}">
                    <div class="name" :class="{button: item.location}" :style="{'text-align': item.location}">{{ item.text }}</div>
                    <div class="value" v-if="item.values && valuesType(index) != 1">
                        {{ item.values[item.i] }}
                        <img :src="(menu.i != index)? 'img/selectMenu/edit.png' : 'img/selectMenu/edit-selected.png'" v-if="valuesType(index) == 3" />
                    </div>
                    <div class="value color-type" v-else-if="item.values && valuesType(index) == 1" :style="{background: item.values[item.i]}"></div>
                </div>
            </div>
            <div class="arrow arr-down" :class="{active: menu.j < menu.items.length - maxItems}"></div>
        </div>
        <div v-if="valuesType(menu.i) == 0" class="selector" v-show="menu.items[menu.i].values.length > 1">
            <div v-for="value in values">{{ value }}</div>
        </div>
        <div v-else-if="valuesType(menu.i) == 1" class="selector select-color">
            <div class="arrow arr-left" :class="{active: menu.items[menu.i].j > 0}"></div>
            <div class="color-type" v-for="(value, index) in items[menu.i].values" v-show="isColorValueShow(index)" :class="{active: index == menu.items[menu.i].i}" :style="{background: value}"></div>
            <div class="arrow arr-right" :class="{active: menu.items[menu.i].j < menu.items[menu.i].values.length - maxColorValues}"></div>
        </div>
        <div v-else-if="valuesType(menu.i) == 2" class="selector select-number">
            <div>{{ menu.items[menu.i].min }}</div>
            <div class="progress">
                <div class="fill" :style="{left: leftNumberType}"></div>
            </div>
            <div>{{ menu.items[menu.i].max }}</div>
        </div>
        <div class="notification" v-if="notification">
            {{ notification }}
        </div>
        <div class="textField" v-show="valuesType(menu.i) == 3">
            <input :ref="menu.items[menu.i].text" type="text" v-model="menu.items[menu.i].values[0]" :placeholder="menu.items[menu.i].text" />
        </div>
        <div v-cloak="v-cloak" class="loader lds-css ng-scope" v-if="loader">
            <div class="lds-rolling">
                <div></div>
            </div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="auth" v-if="show">
        <div class="content">
            <center>
                <img class="logo" src="img/logo.png" />
            </center>
            <div class="header">{{ header }}</div>
            <div class="authAccount" v-if="form == 0">
                <label>Логин или Email
                    <input type="text" v-model="loginOrEmail" v-on:keyup.enter="authAccountHandler" autofocus />
                    <img class="ic-login" src="img/auth/login.png" />
                </label>
                <label>Пароль
                    <input type="password" v-model="password" v-on:keyup.enter="authAccountHandler" />
                    <img class="ic-password" src="img/auth/password.png" />
                </label>
                <a class="recoveryAccountBtn" @click="form = 2">Забыли пароль?</a>
                <a class="regAccountBtn" @click="form = 1">Создать аккаунт</a>
                <button @click="authAccountHandler">Далее</button>
            </div>
            <div class="regAccount" v-if="form == 1">
                <label>Логин
                    <input type="text" v-model="login" v-on:keyup.enter="regAccountHandler" autofocus />
                    <img class="ic-login" src="img/auth/login.png" />
                </label>
                <label>Email
                    <input type="text" v-model="email" v-on:keyup.enter="regAccountHandler" />
                    <img class="ic-email" src="img/auth/email.png" />
                </label>
                <label>Пароль
                    <input type="password" v-model="password" v-on:keyup.enter="regAccountHandler" />
                    <img class="ic-password" src="img/auth/password.png" />
                </label>
                <label>Повторите пароль
                    <input type="password" v-model="password2" v-on:keyup.enter="regAccountHandler" />
                    <img class="ic-password2" src="img/auth/password.png" />
                </label>
                <a class="authAccountBtn" @click="form = 0">Войти в аккаунт</a>
                <button @click="regAccountHandler(-1)">Далее</button>
            </div>
            <div class="recoveryAccount" v-if="form == 2">
                <label>Логин или Email
                    <input type="text" v-model="loginOrEmail" v-on:keyup.enter="recoveryAccountHandler" autofocus />
                    <img class="ic-login" src="img/auth/login.png" />
                </label>
                <label style="display: none">Код подтверждения
                    <input type="text" v-model="code" v-on:keyup.enter="recoveryAccountHandler" />
                    <img class="ic-password" src="img/auth/password.png" />
                </label>
                <label style="display: none">Пароль
                    <input type="text" v-model="password" v-on:keyup.enter="recoveryAccountHandler" />
                    <!-- <img class="ic-password" src="img/auth/password.png" /> -->
                </label>
                <label style="display: none">Повторите пароль
                    <input type="text" v-model="password2" v-on:keyup.enter="recoveryAccountHandler" />
                    <!-- <img class="ic-password" src="img/auth/password.png" /> -->
                </label>
                <a class="authAccountBtn" @click="form = 0">Войти в аккаунт</a>
                <button @click="recoveryAccountHandler">Далее</button>
            </div>
            <div class="confirmEmail" v-if="form == 3">
                <label>Код подтверждения
                    <input type="text" v-model="code" autofocus />
                    <img class="ic-password" src="img/auth/password.png" />
                </label>
                <a class="confirmEmailBtn" onclick="regAccountHandler()">Пропустить</a>
                <button>Далее</button>
            </div>

            <div class="input-prompt" v-if="prompt">{{ prompt }}</div>

        </div>
    </div>

    <div v-cloak="v-cloak" id="loader" class="lds-css ng-scope" v-if="show">
        <div class="lds-rolling">
            <div></div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="characterPass" v-if="show">
        <span class="close" @click="close()">x</span>
        <div class="header">{{ header }}</div>
        <div class="content">
            <div class="infoA">
                <div class="label">Имя</div>
                <div class="value">{{ fullname }}</div>
                <div class="label">Гражданство</div>
                <div class="value">UNITED STATED OF AMERICA</div>
                <div class="label">Дата получения</div>
                <div class="value">{{ regDate }}</div>
            </div>
            <div class="infoB">
                <div class="label">Пол</div>
                <div class="value">{{ prettySex }}</div>
                <div class="label">Выдан</div>
                <div class="value">United States Department of State</div>
            </div>
        </div>
        <div class="number">{{ prettyNumber }}</div>
        <div class="footer">P&lt;USA{{ fName }}&lt;&lt;{{ sName }}&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;<br />
            Numpass&lt;&lt;{{ prettyNumber }}
        </div>
    </div>

    <div v-cloak="v-cloak" id="carPass" v-if="show">
        <span class="close" @click="close()">x</span>
        <div class="header">{{ header }}</div>
        <div class="content">
            <div class="infoA">
                <div class="label">Идентификатор</div>
                <div class="value">{{ prettyId }}</div>
                <div class="label">Название</div>
                <div class="value">{{ name }}</div>
                <div class="label">Тип Т/С</div>
                <div class="value">{{ vehType }}</div>
                <div class="label">Дата регистрации</div>
                <div class="value">{{ regDate }}</div>
                <div class="label">Гос. стоимость</div>
                <div class="value">${{ prettyPrice }}</div>
            </div>
            <div class="infoB">
                <div class="label">Владельцев</div>
                <div class="value">{{ owners }}</div>
                <div class="label">Рег. номер</div>
                <div class="value">{{ number }}</div>
            </div>
        </div>
        <div class="number">{{ number }}</div>
    </div>

    <div v-cloak="v-cloak" id="driverLicense" v-if="show">
        <span class="close" @click="close">x</span>
        <div class="header">{{ header }}</div>
        <div class="content">
            <div class="infoA">
                <h3>Driver License</h3>
                <div class="label">ID Лицензии</div>
                <div class="value">{{ prettyNumber }}</div>
                <div class="label">Имя</div>
                <div class="value">{{ name }}</div>
                <div class="label">Пол</div>
                <div class="value">{{ prettySex }}</div>
            </div>
            <div class="infoB">
                <div class="category" :class="{active: categories[index]}" v-for="(cat, index) in catNames">
                    <div class="label">{{ cat }}</div>
                    <img :src="imgSrc(index)" />
                </div>
            </div>
        </div>
    </div>

    <div v-cloak id="speedometer" :class="{ noActive: !isActive }" v-if="isShow">
        <svg class="scale" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="766.625" height="387.906" viewBox="0 0 766.625 387.906">
            <path v-for="path in svgScalePaths" :class="{ fill: path.isFill }" :d="path.d" transform="translate(-116.688 -293.5)" />
        </svg>
        <div class="content">
            <div class="speed">
                <div class="value">{{ compSpeed }}</div>
                <div class="unit">км/ч</div>
            </div>
            <div class="headlights">
                <svg :class=" { white: (headlights && headlights != 3), yellow: (headlights == 3) }" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 492.031 492.031" width="512" height="512">
                    <path d="M157.551,88.436c-87.313,0-157.881,70.853-157.55,158.2c0.33,86.55,71.85,156.96,159.44,156.96h73.83   c39.62-100.7,39.62-214.46,0-315.16H157.551z" />
                    <path d="M265.371,88.436c18.48,50.56,27.83,103.46,27.83,157.58s-9.35,107.02-27.83,157.58h36.339   c6.278,0,11.922-3.898,14.075-9.795c34.668-94.968,34.668-200.602,0-295.57c-2.153-5.897-7.797-9.795-14.075-9.795H265.371z" />

                    <path v-if="headlights > 1" v-for="path in svgLightPaths" :d="path.d" :style="(headlights == 2) ? path : ''" />
                </svg>
            </div>
            <div class="lock">
                <svg :class="svgLockPaths[lock].class" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 490.1 490.1">
                    <path :d="svgLockPaths[lock].d" />
                    <path d="M245.05,416.3c11.4,0,20.8-9.3,20.8-20.8v-54c0-11.4-9.3-20.8-20.8-20.8c-11.5,0-20.8,9.3-20.8,20.8v54C224.25,407,233.65,416.3,245.05,416.3z" />
                </svg>
            </div>
            <div class="fuel">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 384 384">
                    <defs>
                        <linearGradient id="fuel-gradient" x2="0" y2="1">
                            <stop :offset="perFuel + '%'" style="stop-color: white"></stop>
                            <stop :offset="perFuel + '%'" style="stop-color: #e1a030"></stop>
                        </linearGradient>
                    </defs>
                    <path fill="url(#fuel-gradient)" :d="svgFuelPath" />
                </svg>
            </div>
            <div class="fuel-unit">{{ fuel }} л</div>
            <div class="danger">
                <svg :class="{ red: danger }" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512">
                    <path :d="svgDangerPath" />
                </svg>
            </div>
            <div class="left-arrow">
                <svg :class="{ green: leftArrow }" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.736in" height="0.5in" viewBox="0 0 51.657 35.688">
                    <path d="M52.581,9.487 L25.498,9.487 L25.498,0.248 L0.933,18.099 L25.498,35.949 L25.498,26.710 L52.581,26.710 L52.581,9.487 Z" />
                </svg>
            </div>
            <div class="right-arrow">
                <svg :class="{ green: rightArrow }" xmlns="http://www.w3.org/2000/svg" width="51.657" height="35.688" viewBox="0 0 51.657 35.688">
                    <path d="M683.418,679.71H710.5v9.239l24.565-17.85L710.5,653.248v9.24H683.418V679.71Z" transform="translate(-683.406 -653.25)" />
                </svg>
            </div>
            <div class="bottom-panel">
                <div class="road-perspective">
                    <svg class="white" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 34.2 34.2">
                        <path d="M25.243,0h-5.869l0.332,5.4h-4.984L15.096,0H9.228L0.725,34.2h12l0.607-8.774h7.604l0.539,8.774h12L25.243,0zM13.675,20.475l0.702-10.125h5.631l0.621,10.125H13.675z" />
                    </svg>
                </div>
                <div class="mileage">{{ mileage }} км</div>

            </div>
        </div>
    </div>

    <div v-cloak id="interactionMenu" v-if="show && enable" v-bind:style="{left: left + 'vw'}">
        <div class="interaction_item" v-for="(item, index) in menu.items" @click="onClick(index)">
            <div class="icon"><img :src="imgSrc(index)" />
            </div>
            <div class="text">{{ item.text }}</div>
        </div>
    </div>

    <div id="inventory" v-show="show" :class="{spin: spin}" :style="{opacity: 1}">
        <div class="environment">
            <div class="container" v-for="place in environment" v-bind:key="place.header">
                <div class="header" @click="place.showPockets = !place.showPockets" :class="{hidden: !place.showPockets}">
                    <div class="title">{{ place.header }} {{ (debug)? place.sqlId : "" }}</div>
                    <div>{{ getPlaceWeight(place).toFixed(1) }} кг</div>
                </div>
                <div class="pockets" v-show="place.showPockets">
                    <div class="items" v-for="pocket in place.pockets" v-bind:style="{gridTemplateColumns: 'repeat(' + pocket.cols + ', 1fr)'}">
                        <div class="column" v-for="n in pocket.cols * pocket.rows" :key="n-1" :class="columnClass(n-1, pocket, place)" @mouseenter="columnMouseHandler(place, pocket, n-1, $event)" @mouseleave="columnMouseHandler(place, pocket, n-1, $event)">
                            <div class="item" v-if="pocket.items[n-1]" @mouseenter="itemMouseHandler(pocket.items[n-1], $event)" @mouseleave="itemMouseHandler(pocket.items[n-1], $event)" @mousemove="itemMouseHandler(pocket.items[n-1], $event)"
                                @mousedown="itemMouseHandler(pocket.items[n-1], $event)" :style="itemStyle(pocket.items[n-1].itemId)" :class="{dragging: pocket.items[n-1] == itemDrag.item}">
                                <div class="count" v-if="pocket.items[n-1].params.count">{{ pocket.items[n-1].params.count }}</div>
                                <div class="health" v-if="pocket.items[n-1].params.health" v-bind:style="{top: 100 - pocket.items[n-1].params.health + '%', 'border-color': valueColor(pocket.items[n-1].params.health)}"></div>
                                <div class="sqlid" v-if="debug">#{{ pocket.items[n-1].sqlId }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="empty" v-show="!environment.length">Без взаимодействия</div>
        </div>
        <div class="equipment">
            <div class="header">
                <div class="title">Экипировка</div>
                <img src="img/inventory/satiety.png" /><span class="satiety" :style="{color: valueColor(satiety)}">{{ satiety }}%</span>
                <img src="img/inventory/thirst.png" /><span class="thirst" :style="{color: valueColor(thirst)}">{{ thirst }}%</span>
                <!-- <div>Голод <span class="satiety">{{ satiety }}</span>%</div> -->
                <!-- <div>Жажда <span class="thirst">{{ thirst }}</span>%</div> -->
            </div>
            <div class="body-items">
                <div class="column" :class="{focus: itemDrag.item && itemDrag.accessColumns.bodyFocus == n-1}" v-for="n in 13" @mouseenter="onBodyItemEnter(n-1)" @mouseleave="onBodyItemLeave(n-1)">
                    <!-- <div class="item" v-if="equipment[n-1]" v-bind:style="{backgroundImage: 'url(' + urlItemImg(equipment[n-1].itemId) + ')'}">
                       <div class="count" v-if="equipment[n-1].params.count">{{ equipment[n-1].params.count }}</div>
                       <div class="health" v-if="equipment[n-1].params.health" v-bind:style="{top: 100 - equipment[n-1].params.health + '%'}"></div>
                       <div class="sqlid" v-if="debug">#{{ equipment[n-1].sqlId }}</div>
                   </div> -->
                    <div class="item" v-if="equipment[n-1]" @mouseenter="itemMouseHandler(equipment[n-1], $event)" @mouseleave="itemMouseHandler(equipment[n-1], $event)" @mousemove="itemMouseHandler(equipment[n-1], $event)" @contextmenu="itemMouseHandler(equipment[n-1], $event)"
                        :style="{backgroundImage: 'url('+urlItemImg(equipment[n-1].itemId)+')'}" @mousedown="itemMouseHandler(equipment[n-1], $event)" :class="{dragging: equipment[n-1] == itemDrag.item}">
                        <div class="count" v-if="equipment[n-1].params.count">{{ equipment[n-1].params.count }}</div>
                        <div class="health" v-if="equipment[n-1].params.health" v-bind:style="{top: 100 - equipment[n-1].params.health + '%', 'border-color': valueColor(equipment[n-1].params.health)}"></div>
                        <div class="sqlid" v-if="debug">#{{ equipment[n-1].sqlId }}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="playerInventory">
            <div class="header">
                <div class="title">Инвентарь</div>
                <div>Тяжесть {{ playerWeight.toFixed(1) }}%</div>
            </div>
            <div class="container" v-for="item in equipment" v-if="item.pockets">
                <div class="header" @click="item.showPockets = !item.showPockets" :class="{hidden: !item.showPockets}">
                    <div class="title">{{ item.params.name || itemsInfo[item.itemId].name }}</div>
                    <div>{{ getPlaceWeight(item).toFixed(1) }} кг</div>
                </div>
                <div class="pockets" v-show="item.showPockets">
                    <div class="items" v-for="pocket in item.pockets" v-bind:style="{gridTemplateColumns: 'repeat(' + pocket.cols + ', 1fr)'}">
                        <div class="column" v-for="n in pocket.cols * pocket.rows" :key="n-1" :class="columnClass(n-1, pocket, item)" @mouseenter="columnMouseHandler(item, pocket, n-1, $event)" @mouseleave="columnMouseHandler(item, pocket, n-1, $event)">
                            <div class="item" v-if="pocket.items[n-1]" @mouseenter="itemMouseHandler(pocket.items[n-1], $event)" @mouseleave="itemMouseHandler(pocket.items[n-1], $event)" @mousemove="itemMouseHandler(pocket.items[n-1], $event)"
                                @contextmenu="itemMouseHandler(pocket.items[n-1], $event)" @mousedown="itemMouseHandler(pocket.items[n-1], $event)" :style="itemStyle(pocket.items[n-1].itemId)" :class="{dragging: pocket.items[n-1] == itemDrag.item}">
                                <div class="count" v-if="pocket.items[n-1].params.count">{{ pocket.items[n-1].params.count }}</div>
                                <div class="health" v-if="pocket.items[n-1].params.health" v-bind:style="{top: 100 - pocket.items[n-1].params.health + '%', 'border-color': valueColor(pocket.items[n-1].params.health)}"></div>
                                <div class="sqlid" v-if="debug">#{{ pocket.items[n-1].sqlId }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hands">
            <div class="left-slot" v-bind:class="{busy: hands}">
                <div class="item" v-if="hands && getItem(hands.sqlId)" v-bind:style="{backgroundImage: 'url(' + urlItemImg(hands.itemId) + ')'}">
                    <div class="count" v-if="hands.params.count">{{ hands.params.count }}</div>
                    <div class="health" v-if="hands.params.health" v-bind:style="{top: 100 - hands.params.health + '%', 'border-color': valueColor(hands.params.health)}"></div>
                    <div class="sqlid" v-if="debug">#{{ hands.sqlId }}</div>
                </div>
                <img v-if="!hands" src="img/inventory/hand.png" />
                <!-- <span v-if="!hands.left">в левой <br />руке</span> -->
            </div>
            <div class="right-slot" v-show="!hands" v-bind:class="{busy: hands}">
                <!-- <div class="item" v-if="hands" v-bind:style="{backgroundImage: 'url(' + urlItemImg(hands.itemId) + ')'}">
                    <div class="count" v-if="hands.params.count">{{ hands.params.count }}</div>
                    <div class="health" v-if="hands.params.health" v-bind:style="{top: 100 - hands.params.health + '%', 'border-color': valueColor(hands.params.health)}"></div>
                    <div class="sqlid" v-if="debug">#{{ hands.sqlId }}</div>
                </div> -->
                <!-- <span v-else>в правой <br />руке</span> -->
                <img v-if="!hands" src="img/inventory/hand.png" />
            </div>
        </div>
        <div class="hotkeys" :class="{active: itemDrag.item && hotkeysList[itemDrag.item.itemId]}">
            <div class="key" :class="{focus: itemDrag.item && itemDrag.accessColumns.hotkeyFocus == n}" v-for="n in 10" @mouseenter="onHotkeyItemEnter(n)" @mouseleave="onHotkeyItemLeave(n)">
                <div class="item" v-if="hotkeys[n] && getItem(hotkeys[n].sqlId)" v-bind:style="{backgroundImage: 'url('+urlItemImg(hotkeys[n].itemId)+')'}">
                    <span class="hotkey">{{ (n == 10)? 0 : n }}</span>

                    <div class="count" v-if="hotkeys[n].params.count">{{ hotkeys[n].params.count }}</div>
                    <div class="health" v-if="hotkeys[n].params.health" v-bind:style="{top: 100 - hotkeys[n].params.health + '%', 'border-color': valueColor(hotkeys[n].params.health)}"></div>
                    <div class="sqlid" v-if="debug">#{{ hotkeys[n].sqlId }}</div>
                </div>
            </div>
        </div>
        <div class="item-desc" v-if="itemDesc.item && !itemMenu.item && !itemDrag.item && (getItem(itemDesc.item.sqlId) || getEnvironmentItem(itemDesc.item.sqlId))" :style="{left: itemDesc.x + 'px', top: itemDesc.y + 'px'}">
            <div class="title">{{ descItemName }}</div>
            <div v-if="debug">itemId: #{{ itemDesc.item.itemId }}</div>
            <div class="item" v-if="itemDesc.item" :style="itemStyle(itemDesc.item.itemId)">
                <div class="sqlid" v-if="debug">#{{ itemDesc.item.sqlId }}</div>
                <div class="count" v-if="itemDesc.item.params.count">{{ itemDesc.item.params.count }}</div>
                <div class="health" v-if="itemDesc.item.params.health" :style="{top: 100 - itemDesc.item.params.health + '%', 'border-color': valueColor(itemDesc.item.params.health)}"></div>
            </div>
            <div class="description">{{ itemsInfo[itemDesc.item.itemId].description }}</div>
            <div class="params">
                <div class="param">
                    <div class="name">Вес</div>
                    <div class="value">{{ descItemWeight }} кг</div>
                </div>
                <div class="param">
                    <div class="name">Занимает</div>
                    <div class="value">{{ itemsInfo[itemDesc.item.itemId].width+'x'+itemsInfo[itemDesc.item.itemId].height }} ячейки</div>
                </div>
                <div class="param" v-if="itemDesc.item.params.health">
                    <div class="name">Прочность</div>
                    <div class="value">{{ itemDesc.item.params.health}}%</div>
                </div>
                <div class="param" v-if="itemDesc.item.params.count">
                    <div class="name">Количество</div>
                    <div class="value">{{ itemDesc.item.params.count}} ед.</div>
                </div>
                <div class="param" v-if="itemDesc.item.pockets">
                    <div class="name">Карманы</div>
                    <div class="value">{{ itemDesc.item.pockets.length }} ед.</div>
                </div>
                <div class="param" v-if="getItemsCount(itemDesc.item)">
                    <div class="name">Содержит</div>
                    <div class="value">{{ getItemsCount(itemDesc.item) }} предметов</div>
                </div>
            </div>
        </div>
        <div class="item-menu" v-if="itemMenu.item && !itemDrag.item" :style="{left: itemMenu.x + 'px', top: itemMenu.y + 'px'}">
            <div class="menu-item" v-for="(value, key) in itemsMenu[itemMenu.item.itemId]" @click="value.handler(itemMenu.item)">
                {{ key }}
                <div class="arrow" v-if="value.items">></div>
            </div>
        </div>
        <!-- <div class="item-menu" v-if="itemMenu.item && !itemDrag.item" :style="{left: itemMenu.x + 'px', top: itemMenu.y + 'px'}">
            <div class="menu-item" v-for="(value, key) in itemsMenu[itemMenu.item.itemId]" @click="value.handler(itemMenu.item)">
                {{ key }}
                <div class="arrow" v-if="value.items">></div>
            </div>
        </div> -->
        <div class="item-drag" v-if="itemDrag.item" :style="{left: itemDrag.x + 'px', top: itemDrag.y + 'px'}">
            <div class="item" v-if="itemDrag.item" :style="itemStyle(itemDrag.item.itemId)">
                <!-- <div class="count" v-if="itemDrag.item.params.count">{{ itemDrag.item.params.count }}</div>
               <div class="health" v-if="itemDrag.item.params.health" :style="{top: 100 - itemDrag.item.params.health + '%'}"></div>
               <div class="sqlid" v-if="debug">#{{ itemDrag.item.sqlId }}</div> -->
            </div>
        </div>
    </div>

    <div v-cloak="v-cloak" id="carSpecifications" v-if="show">
        <div class="header">Характеристики</div>
        <div class="body">
            <div class="record" v-for="record in body">
                <div class="left">{{ record.header }}</div>
                <div class="right">{{ record.value }} {{ record.unit }}</div>
                <div class="line"></div>
            </div>
        </div>
        <div class="footer">${{ splitPrice }}</div>
    </div>

    <div v-cloak="v-cloak" id="check" v-if="show">
        <div class="close" @click="hide">X</div>
        <div class="content">
            <div class="header">
                <div class="name">{{ checkName }}</div>
                <div class="logo">
                    <img :src="pathToLogo" />
                </div>
            </div>
            <svg class="head-line">
                <line x1="0" y1="0" x2="100%" y2="0"></line>
            </svg>
            <div class="body">
                <div class="record" v-for="record in records">
                    <div class="left">{{ record.header }}</div>
                    <div class="right">{{ record.price | split }}$</div>
                </div>
                <svg class="total-line">
                    <line x1="70%" y1="0" x2="100%" y2="0"></line>
                </svg>
                <div class="total">
                    <span>Итого:</span> {{ totalPrice | split }}$
                </div>
            </div>
            <div class="footer">
                <div>
                    <div class="pay" @click="pay($event)">
                        <div class="noevent">Оплатить</div>
                        <svg class="noevent">
                            <line x1="0" y1="0" x2="100%" y2="0"></line>
                        </svg>
                    </div>
                </div>
                <div>
                    <div class="nopay" @click="refuse">
                        <div class="noevent">Отказаться</div>
                        <svg class="noevent">
                            <line x1="0" y1="0" x2="100%" y2="0"></line>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div v-cloak="v-cloak" id="input-window" v-if="show">
        <div class="header">{{ header }}</div>
        <div class="body">
            <div class="hint">{{ hint }}</div>
            <input :placeholder="inputHint" v-model="value" />
        </div>
        <div class="footer">
            <div class="left" @click="accept">{{ leftWord }}</div>
            <div class="right" @click="decline">{{ rightWord }}</div>
        </div>
    </div>


    <div v-cloak="v-cloak" id="accept-window" v-if="show">
        <div class="header">{{ header }}</div>
        <div class="footer">
            <div class="left" @click="accept">{{ leftWord }}</div>
            <div class="right" @click="decline">{{ rightWord }}</div>
        </div>
    </div>


    <div v-cloak id="terminal" v-if="show" :style="{left: pos.x + 'px', top: pos.y + 'px'}">
        <div class="header" @mousedown="onHeaderMouseDown($event)">
            <div>Консоль разработчика</div>
            <div class="close" @click="show = false">x</div>
        </div>
        <div class="content scroll">
            <div v-for="mess in messages" v-bind:class="[mess.type]">
                <p v-html="mess.text"></p>
            </div>
        </div>
        <div class="footer">
            <input type="text" v-model="inputText" v-on:keyup.enter="onInputEnter" v-on:keyup.up="onInputUp" v-on:keyup.down="onInputDown" :ref="'input'" placeholder="classic command..." autofocus />
        </div>
    </div>

    <!-- ------------------------ СПИСОК ИГРОКОВ ------------------------ -->

    <div v-cloak id="playersList" :class="{inactive: loader}" v-show="show">
        <div class="players_list-head">
            <table rules="all">
                <colgroup>
                    <col style="width: 10%" />
                    <col style="width: 40%" />
                    <col style="width: 40%" />
                    <col style="width: 10%" />
                </colgroup>
                <thead>
                    <tr>
                        <th>id</th>
                        <th>Имя</th>
                        <th>Организация</th>
                        <th>ping</th>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="players_list-body">
            <table rules="all">
                <colgroup>
                    <col style="width: 10%" />
                    <col style="width: 40%" />
                    <col style="width: 40%" />
                    <col style="width: 10%" />
                </colgroup>
                <tbody>
                    <tr v-for="player in players">
                        <th>{{ player.id }}</th>
                        <th>{{ player.name }}</th>
                        <th>{{ player.faction ? player.faction: '-' }}</th>
                        <th>{{ player.ping }}</th>
                    </tr>
                </tbody>
            </table>
        </div>
        <div v-cloak="v-cloak" id="loader" class="loader lds-css ng-scope" v-if="loader">
            <div class="lds-rolling">
                <div></div>
            </div>
        </div>
    </div>

    <!-- ------------------------ СПИСОК ИГРОКОВ ------------------------ -->

    <div v-cloak id="gunLicense" v-if="show">
        <span class="close" @click="close">x</span>
        <div class="header">{{ header }}</div>
        <div class="line"></div>
        <div class="content">
            <div class="name">{{ name }}</div>
            <div class="sex">
                <div class="key">Пол</div>
                <div class="value">{{ prettySex }}</div>
            </div>
            <div class="date">
                <div class="key">Дата выдачи</div>
                <div class="value">{{ date }}</div>
            </div>
            <div class="number">№ {{ number }}</div>
        </div>
    </div>

    <!-- ------------------------ ПЛАНШЕТ ПД ------------------------ -->
    <link rel="stylesheet" type="text/css" href="css/mapCase.css" />
    <link rel="stylesheet" type="text/css" href="css/mapCasePd.css" />
    <link rel="stylesheet" type="text/css" href="css/mapCaseEms.css" />
    <link rel="stylesheet" type="text/css" href="css/mapCaseWNews.css" />

    <script type="text/x-template" id="map-case-pd-dbSearch">
        <div class="dbSearch">
            <div class="logo"><img src="img/mapCase/pd-logo.svg"/></div>
            <div class="title">ПОИСК ПО БАЗЕ ДАННЫХ</div>
            <div class="dbSearch-menu">
                <div class="main-line"></div>
                <div :class="{focus: menuItemInFocus == 'phone'}" @click="onClickMenuItem('phone')">
                    <div>Номер телефона</div>
                    <div class="line"></div>
                </div>
                <div></div>
                <div :class="{focus: menuItemInFocus == 'name'}" @click="onClickMenuItem('name')">
                    <div>Имя или/и фамилия</div>
                    <div class="line"></div>
                </div>
                <div></div>
                <div :class="{focus: menuItemInFocus == 'car'}" @click="onClickMenuItem('car')">
                    <div>Номер автомобиля</div>
                    <div class="line"></div>
                </div>
            </div>
            <div class="input">
                <input
                    :placeholder="menuItems[menuItemInFocus].hint"
                    v-model="menuItems[menuItemInFocus].inputValue"
                    @keypress="menuItems[menuItemInFocus].inputCheck($event); enterHandler($event)"
                />
            </div>
            <div class="search" @click="search()">Поиск</diV>
        </div>
    </script>

    <script type="text/x-template" id="map-case-pd-dbResult">
        <div class="dbResult board">
            <div class="title">Результат: {{ list.length }}</div>
            <div class="table">
                <div class="head">
                    <div class="first" @click="onClickSort('num')">
                        <div>#</div>
                        <svg :class="{focus: sortMod.mod == 'num'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div @click="onClickSort('name')">
                        <div>Имя и фамилия</div>
                        <svg :class="{focus: sortMod.mod == 'name'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div @click="onClickSort('phone')">
                        <div>Номер телефона</div>
                        <svg :class="{focus: sortMod.mod == 'phone'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div @click="onClickSort('address')">
                        <div>Проживание</div>
                        <svg :class="{focus: sortMod.mod == 'address'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                </div>
                <div class="tbody">
                    <div class="record" @click="onClickRecord(record)" v-for="record in sortedList" :key="record.id">
                        <div class="first"><div class="record-align">{{ record.num }}</div></div>
                        <div><div class="record-align">{{ record.name }}</div></div>
                        <div><div class="record-align">{{ record.phone }}</div></div>
                        <div><div class="record-align">{{ record.address | textSplice(28) }}</div></div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="map-case-calls">
        <div class="calls board">
            <div class="title">Вызовы</div>
            <div class="table">
                <div class="head">
                    <div class="first" @click="onClickSort('num')">
                        <div>#</div>
                        <svg :class="{focus: sortMod.mod == 'num'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div @click="onClickSort('name')">
                        <div>Имя и фамилия</div>
                        <svg :class="{focus: sortMod.mod == 'name'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div>Причина вызова</div>
                    <div>Действие</div>
                </div>
                <div class="tbody">
                    <div class="record" v-for="record in sortedList" :key="record.num">
                        <div class="first"><div class="record-align">{{ record.num }}</div></div>
                        <div><div class="record-align">{{ record.name }}</div></div>
                        <div><div class="record-align">{{ record.description | textSplice(32) }}</div></div>
                        <div><div class="record-align btn" @click="onClickAccept(record)">Принять</div></div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="map-case-pd-wanted">
        <div class="wanted board">
            <div class="title">Список разыскиваемых</div>
            <div class="table">
                <div class="head">
                    <div class="first" @click="onClickSort('num')">
                        <div>#</div>
                        <svg :class="{focus: sortMod.mod == 'num'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div @click="onClickSort('name')">
                        <div>Имя и фамилия</div>
                        <svg :class="{focus: sortMod.mod == 'name'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div>Причина</div>
                    <div @click="onClickSort('danger')">
                        <div>Опасность</div>
                        <svg :class="{focus: sortMod.mod == 'danger'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                </div>
                <div class="tbody">
                    <div class="record" @click="onClickRecord(record)" v-for="record in sortedList" :key="record.num">
                        <div class="first"><div class="record-align">{{ record.num }}</div></div>
                        <div><div class="record-align">{{ record.name }}</div></div>
                        <div><div class="record-align">{{ record.description | textSplice(32) }}</div></div>
                        <div><div class="record-align stars">
                            <svg :class="{ fill: record.danger >= n }" v-for="n in 5" viewBox="0 0 14 14"><path :d="star"/></svg>
                        </div></div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="map-case-members">
        <div class="members board">
            <div class="title">Список сотрудников</div>
            <div class="table" @click="hideModal($event)">
                <div class="head">
                    <div class="first" @click="onClickSort('num')">
                        <div>#</div>
                        <svg :class="{focus: sortMod.mod == 'num'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div @click="onClickSort('name')">
                        <div>Имя и фамилия</div>
                        <svg :class="{focus: sortMod.mod == 'name'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div @click="onClickSort('rank')">
                        <div>{{ rankHead }}</div>
                        <svg :class="{focus: sortMod.mod == 'rank'}" viewBox="0 0 9 16"><path v-for="path in arrows" :d="path" /></svg>
                    </div>
                    <div>Действие</div>
                </div>
                <div ref="membersBody" class="tbody" @scroll.passive="hideModal()">
                    <div
                        :class="['record', {focus: currentRecord == record}]"
                        v-for="record in sortedList"
                        :key="record.id"
                        :style="{ pointerEvents: (currentRecord) ? 'none' : 'auto' }">
                        <div class="first"><div class="record-align">{{ record.num }}</div></div>
                        <div><div class="record-align">{{ record.name }}</div></div>
                        <div><div class="record-align rank">{{ ranks[record.rank - 1] }}</div></div>
                        <div><div class="record-align btn" @click="showModal($event, record)">
                            Действие
                            <svg viewBox="0 0 12 6"><path d="M1 1L5.3753 4.50024C5.74052 4.79242 6.25948 4.79242 6.6247 4.50024L11 1"/></svg>
                        </div></div>
                    </div>
                </div>
                <div
                    v-show="modalIsShow"
                    class="action-modal"
                    :style="modalStyles">
                    <div class="btn" @click="onClickRaise()">Повысить</div>
                    <div class="btn" @click="onClickLower()">Понизить</div>
                    <div class="btn" @click="onClickDismiss()">Уволить</div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="map-case-pd-identification">
        <div class="dbSearch identification">
            <div class="logo"><img src="img/mapCase/identification.svg"/></div>
            <div class="title">УСТАНОВЛЕНИЕ ЛИЧНОСТИ</div>
            <div class="input">
                <input
                    placeholder="Введите ID..."
                    v-model="inputValue"
                    @keypress="inputCheck($event); enterHandler($event)"
                />
            </div>
            <div class="search" @click="search()">Установить личность</diV>
        </div>
    </script>

    <script type="text/x-template" id="map-case-pd-profile">
        <div class="profile">
            <div class="title">Профиль</div>
            <div class="body">
                <div class="name">{{ profileData[currentMenuFocus].name }} <span>ID: {{ profileData[currentMenuFocus].id}}</span></div>
                <div class="stars"><svg :class="{ fill: profileData[currentMenuFocus].danger >= n }" v-for="n in 5" viewBox="0 0 14 14"><path :d="star"/></svg></div>
                <div>
                    <div class="record" v-for="record in infoList" :key="record.key">{{ record.title }}<span>{{ profileData[currentMenuFocus][record.key] }}</span></div>
                </div>
                <div class="cause">Причина:<br />{{ profileData[currentMenuFocus].cause }}</div>
                <div class="footer">
                    <div class="btn" @click="showOverWindow('fine')"><img src="img/mapCase/receipt.svg"/></div>
                    <div class="btn" @click="showOverWindow('wanted')"><img src="img/mapCase/handcuffs.svg"/></div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="map-case-wnews-ads">
        <div class="ads">
            <div class="logo"><img src="img/mapCase/news-paper.svg"/></div>
            <div class="title">РЕДАКТИРОВАНИЕ ОБЪЯВЛЕНИЯ</div>
            <div class="hint">Объявлений для редактирования: <span>{{ adsAmount }}</span></div>
            <div class="btn" @click="get()">Получить</diV>
        </div>
    </script>

    <script type="text/x-template" id="map-case-wnews-over-ads">
        <div class="over ads">
            <div class="title">{{ header }}</div>
            <div :class="['text', { focus: editMod }]" :contenteditable="editMod" @input="update" @keypress="inputCheck($event)"></div>
            <div class="line"></div>
            <div class="author"><span>Автор:</span> {{ adData.ad.author }}</div>
            <div :class="['btns', { refuse: refuseMod }]">
                <div v-if="!refuseMod" class="btn" @click="edit()"><div><img src="img/mapCase/edit_pen.svg"/></div><div class="cont">РЕДАКТИРОВАТЬ ТЕКСТ</div></div>
                <div v-if="!refuseMod" class="btn send" @click="send()"><div><img src="img/mapCase/stopwatch.svg"/></div><div class="cont">ОТПРАВИТЬ</div></div>
                <div class="btn" @click="refuse()"><div><img src="img/mapCase/error_gray.svg"/></div><div class="cont">ОТКАЗАТЬ</div></div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="map-case-pd-over-fine">
        <div class="over verification fine" @keypress="enterHandler($event)">
            <div class="header"> Выдача штрафа {{ profileData[currentMenuFocus].name}}</div>
            <div class="title">Введите причину</div>
            <div class="input"><input placeholder="Введите причину выдачи штрафа..." v-model="causeValue"/></div>
            <div class="title">Введите сумму штрафа</div>
            <div class="input"><input placeholder="Введите сумму..." v-model="amountValue" @keypress="inputCheck($event)"/></div>
            <div class="btns">
                <div class="btn" @click="give()">Выдать</div>
                <div class="btn" @click="cancel()">Отмена</div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="map-case-pd-over-wanted">
        <div class="over verification fine" @keypress="enterHandler($event)">
            <div class="header"> Выдача розыска {{ profileData[currentMenuFocus].name}}</div>
            <div class="title">Введите причину</div>
            <div class="input"><input placeholder="Введите причину выдачи розыска..." v-model="causeValue"/></div>
            <div class="title">Выберете степень опасности</div>
            <div class="stars" @click="setDanger()"><svg
                                :class="{ fill: overDanger >= n }"
                                v-for="n in 5"
                                viewBox="0 0 14 14"
                                @mouseover="over(n)"
                                @mouseout="over(0)">
                                <path :d="star"/></svg></div>
            <div class="btns">
                <div class="btn" @click="give()">Выдать</div>
                <div class="btn" @click="cancel()">Отмена</div>
            </div>
        </div>
    </script>

    <div id="map-case" class="w-bg" v-if="show && enable" v-cloak>
        <div :class="['b-bg', type]">
            <div :class="['screen', { blur: blurMod }]">
                <div class="menu">
                    <div class="header">
                        <div class="menu-top">
                            <div v-html="certainData.menuHeader"></div>
                            <img v-if="certainData.menuHeaderName" :src="certainData.menuHeaderName" />
                        </div>
                        <div class="menu-bottom">
                            <div>
                                <img :src="certainData.menuHeaderImg" />
                            </div>
                            <div>
                                {{ certainData.menuTitle }}<br />
                                <span>{{ userName }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="menu-body">
                        <div :class="['menu-item', {focus: menuFocus == name}]" v-for="(item, name) in certainData.menuBody" :key="name" @click="onClickMenuItem(name)">
                            <div>
                                <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path v-for="path in item.img" :d="path" /></svg>
                            </div>
                            <div>{{ item.title }}</div>
                        </div>
                        <div v-if="emergencyCall" class="emergency" @click="emergencyCall(); showLoad();">
                            Экстренный вызов
                        </div>
                    </div>
                </div>
                <div class="body">
                    <div class="top-bar">
                        <div>{{ time }}</div>
                        <div><img src="img/mapCase/wifi.svg" /></div>
                    </div>
                    <div class="window">
                        <keep-alive>
                            <component :is="currentWindow" v-bind="dataForWindow"></component>
                        </keep-alive>
                        <div v-if="certainData.menuBody[menuFocus].windows.length > 1" class="back btn" @click="onClickBack">
                            <img src="img/mapCase/return.svg" />
                        </div>
                    </div>
                </div>
                <div v-if="blurMod" class="blurShadow" @click="hidePopupMessage()"></div>
            </div>
            <div v-if="loadMod" class="load">
                <div>Загрузка <span v-if="loadMod.waitingTime >= 0">({{ loadMod.waitingTime }}с)</span></div>
                <div class="dots">
                    <div :class="{focus: loadMod.loadCount % 3 == 0}">.</div>
                    <div :class="{focus: loadMod.loadCount % 3 == 1}">.</div>
                    <div :class="{focus: loadMod.loadCount % 3 == 2}">.</div>
                </div>
                <div class="message" v-html="loadMod.message"></div>
            </div>
            <div v-if="popupMessage" class="popup-message">
                <div class="body">
                    <div><img :src="'img/mapCase/' + popupMessage.img + '.svg'" /></div>
                    <div v-html="popupMessage.message"></div>
                </div>
                <div class="hint">
                    <div><img src="img/mapCase/tap.svg" /></div>
                    <div>Кликните в любое место для закрытия окна</div>
                </div>
            </div>
            <div v-if="verification" class="verification">
                <div class="message" v-html="verification.message"></div>
                <div class="btns">
                    <div class="btn" @click="verification.accept()">Да</div>
                    <div class="btn" @click="hideVerification()">Нет</div>
                </div>
            </div>
            <component :is="currentOverWindow" v-bind="dataForWindow"></component>
        </div>
    </div>

    <script src="js/mapCaseSvgPaths.js"></script>
    <script src="js/mapCasePd.js"></script>
    <script src="js/mapCaseEms.js"></script>
    <script src="js/mapCaseWNews.js"></script>
    <script src="js/mapCase.js"></script>
    <!-- ------------------------ ПЛАНШЕТ ПД ------------------------ -->

    <div v-cloak id="fishing" v-if="show">
        <div class="fishing-line" v-if="isFetch">
            <div class="fishing-zone" v-bind:style="{ width: zone + '%' }"></div>
            <div id="fishing-cursor" v-bind:style="{ marginLeft: position + '%' }"></div>
        </div>
        <div v-if="isStarted && !isFetch">
            <div class="fishing-wait">
                Ждите, пока рыба не клюнет...
            </div>
        </div>
        <div class="fishing-help" v-if="!isStarted || isFetch">
            <table>
                <tr v-if="!isStarted">
                    <th>
                        <span class="fishing-help-button">Space</span>
                    </th>
                    <th>
                        <span>Забросить удочку</span>
                    </th>
                </tr>
                <tr v-if="isFetch">
                    <th>
                        <span class="fishing-help-button">F</span>
                    </th>
                    <th>
                        <span>Вытянуть</span>
                    </th>
                </tr>
                <tr v-if="!isStarted">
                    <th>
                        <span class="fishing-help-button">Esc</span>
                    </th>
                    <th>
                        <span>Выйти</span>
                    </th>
                </tr>
            </table>
        </div>
    </div>

    <div v-cloak id="captureScore" v-if="isShow">
        <div class="header">
            <img :src="leftImgSrc" />
            <span :style="{color: colors[leftBandId]}">{{ names[leftBandId] }}</span>
            <span class="vs">vs.</span>
            <span :style="{color: colors[rightBandId]}">{{ names[rightBandId] }}</span>
            <img :src="rightImgSrc" />
        </div>
        <div class="progress" :style="{background: colors[rightBandId]}">
            <div class="fill" :style="{width: progressWidth+'%', background: colors[leftBandId]}"></div>
        </div>
        <div class="score">
            <div>Убийств: {{ leftScore }}</div>
            <div>{{ prettyTime }}</div>
            <div>Убийств: {{ rightScore }}</div>
        </div>
    </div>

    <div v-cloak id="killList" v-if="isShow">
        <div class="log" v-for="kill in list">
            <div v-if="kill.killer" :style="{color: playerColor(kill.killer)}">{{ kill.killer.name }}</div>
            <img :src="killImgSrc(kill.reason)" />
            <div :style="{color: playerColor(kill.target)}">{{ kill.target.name }} <span v-if="kill.reason && isWeapon(kill.reason)"> из {{ kill.reason }}</span></div>
        </div>
    </div>

    <!-- ------------------------ REACT ------------------------------ -->
    <script async src="build/js/build.js" type="text/javascript"></script>
    <div id="root"></div>
    <!-- ------------------------------------------------------------- -->
    <script src="js/hud.js"></script>
    <script src="js/prompt.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/offerDialog.js"></script>
    <script src="js/infoTable.js"></script>
    <script src="js/characterInfo.js"></script>
    <script src="js/selectMenu.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/loader.js"></script>
    <script src="js/characterPass.js"></script>
    <script src="js/carPass.js"></script>
    <script src="js/driverLicense.js"></script>
    <script src="js/speedometer.js"></script>
    <script src="js/interactionMenu.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/carSpecifications.js"></script>
    <script src="js/check.js"></script>
    <script src="js/inputWindow.js"></script>
    <script src="js/acceptWindow.js"></script>
    <script src="js/terminal.js"></script>
    <script src="js/playersList.js"></script>
    <script src="js/gunLicense.js"></script>
    <script src="js/fishing.js"></script>
    <script src="js/captureScore.js"></script>
    <script src="js/killList.js"></script>

</body>

</html>
